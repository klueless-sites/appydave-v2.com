---
import '~/styles/base.css';

import { SITE } from '~/lib/config';

import Head from '~/layouts/Head.astro';

import GitHubIcon from '~/components/GitHubIcon.astro';
import Logo from '~/components/Logo.astro';
import LogoIcon from '~/components/LogoIcon.astro';
import MobileNavigation from '~/components/MobileNavigation.astro';
import Search from '~/components/Search.astro';
import ThemeSelector from '~/components/ThemeSelector.astro';

export interface Props {
  title: string;
  description: string;
  image?: string;
  next?: string;
  prev?: string;
  canonicalURL?: string;
  font_awesome?: boolean;
  site_map?: boolean;
  rss_feed?: boolean;
}
const { 
  title = Astro.props.content.pageTitle || Astro.props.content.title || SITE.title,
  description = Astro.props.content.description || SITE.description,
  image,
  next,
  prev,
  canonicalURL = Astro.url,
  font_awesome = SITE.font_awesome,
  site_map = SITE.site_map,
  rss_feed = SITE.rss_feed,
} = Astro.props as Props;

// console.log(Object.keys(Astro.props))
// console.log(Object.keys(Astro.props.content))
// console.log(Astro.props.headings)
// console.log(getToc(Astro.props.headings))
// <pre><code>{JSON.stringify(getToc(Astro.props.headings), null, 2)}</code></pre>
---
<!DOCTYPE html>
<html lang="en">
<Head 
  title={title}
  description={description}
  canonicalURL={canonicalURL}
  font_awesome={font_awesome}
  site_map={site_map}
  rss_feed={rss_feed} />

  <body class="bg-white dark:bg-slate-900">
    <header class='sticky top-0 z-50 flex flex-wrap items-center justify-between bg-white px-4 py-5 shadow-md shadow-slate-900/5 transition duration-500 dark:shadow-none sm:px-6 lg:px-8'>
      <!-- 
        TODO:
      isScrolled
        ? 'dark:bg-slate-900/95 dark:backdrop-blur dark:[@supports(backdrop-filter:blur(0))]:bg-slate-900/75'
        : 'dark:bg-transparent'
      -->
      <div class="mr-6 flex lg:hidden">
        <MobileNavigation /> <!-- navigation={navigation} /> -->
      </div>
      <div class="relative flex flex-grow basis-0 items-center">
        <a href="/" aria-label="Home page" class='debug-red'>
          <LogoIcon class="h-9 w-9 lg:hidden" />
          <Logo class="hidden h-9 w-auto fill-slate-700 dark:fill-sky-100 lg:block" />
        </a>
      </div>
      <div class="-my-5 mr-6 sm:mr-8 md:mr-0">
        <Search />
      </div>
      <div class="relative flex basis-0 justify-end gap-6 sm:gap-8 md:flex-grow">
        <ThemeSelector class="relative z-10" />
        <a href="https://github.com" class="group" aria-label="GitHub">
          <GitHubIcon class="h-6 w-6 fill-slate-400 group-hover:fill-slate-500 dark:group-hover:fill-slate-300" />
        </a>
      </div>
    </header>
    <main>
      <slot />
    </main>  
  </body>
  </html>
